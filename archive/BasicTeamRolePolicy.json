{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Action": [
                "athena:*",
                "apigateway:*",
                "appmesh:*",
                "amplify:*",
                "application-autoscaling:*",
                "autoscaling:*",
                "cloud9:*",
                "cloudformation:*",
                "cloudfront:*",
                "cloudtrail:*",
                "cloudwatch:*",
                "codebuild:*",
                "codecommit:*",
                "codedeploy:*",
                "codepipeline:*",
                "codestar:*",
                "cognito-identity:*",
                "cognito-idp:*",
                "cognito-sync:*",
                "comprehendmedical:*",
                "comprehend:*",
                "config:*",
                "dynamodb:*",
                "ec2messages:*",
                "ecr:*",
                "ecs:*",
                "eks:*",
                "elasticmapreduce:*",
                "elasticbeanstalk:*",
                "elasticloadbalancing:*",
                "es:*",
                "events:*",
                "firehose:*",
                "glue:*",
                "greengrass:*",
                "iam:CreateServiceLinkedRole",
                "iam:Generate*",
                "iam:Get*",
                "iam:List*",
                "iam:ListRoles",
                "iot:*",
                "iotanalytics:*",
                "iotevents:*",
                "kinesis:*",
                "kinesisanalytics:*",
                "kms:*",
                "lambda:*",
                "logs:*",
                "medialive:*",
                "mediapackage:*",
                "rds:*",
                "redshift:*",
                "resource-groups:*",
                "s3:*",
                "sagemaker:*",
                "sns:*",
                "sqs:*",
                "ssm:*",
                "ssmmessages:*",
                "states:*",
                "tag:*",
                "translate:*",
                "waf:*",
                "xray:*",
                "deepracer:*",
                "robomaker:*"
            ],
            "Resource": "*",
            "Effect": "Allow",
            "Sid": "OverlyPermissivePolicy"
        },
        {
            "Action": "ec2:RunInstances",
            "Resource": [
                "arn:aws:ec2:*:*:instance/*"
            ],
            "Effect": "Deny",
            "Condition": {
                "StringLike": {
                    "ec2:InstanceType": [
                        "*6xlarge",
                        "*8xlarge",
                        "*10xlarge",
                        "*12xlarge",
                        "*16xlarge",
                        "*18xlarge",
                        "*24xlarge",
                        "f1.4xlarge",
                        "x1*",
                        "z1*",
                        "*metal"
                    ]
                }
            },
            "Sid": "DenyXXLInstances"
        },
        {
            "Action": [
                "ec2:Accept*",
                "ec2:Allocate*",
                "ec2:Assign*",
                "ec2:Associate*",
                "ec2:Attach*",
                "ec2:Authorize*",
                "ec2:Bundle*",
                "ec2:Cancel*",
                "ec2:Confirm*",
                "ec2:Copy*",
                "ec2:Create*",
                "ec2:Delete*",
                "ec2:Deregister*",
                "ec2:Describe*",
                "ec2:Detach*",
                "ec2:Disable*",
                "ec2:Disassociate*",
                "ec2:Enable*",
                "ec2:Get*",
                "ec2:Import*",
                "ec2:Modify*",
                "ec2:Monitor*",
                "ec2:Move*",
                "ec2:Reboot*",
                "ec2:Register*",
                "ec2:Reject*",
                "ec2:Release*",
                "ec2:Replace*",
                "ec2:Report*",
                "ec2:Reset*",
                "ec2:Restore*",
                "ec2:Revoke*",
                "ec2:Run*",
                "ec2:Start*",
                "ec2:Stop*",
                "ec2:Terminate*",
                "ec2:Unassign*",
                "ec2:Unmonitor*",
                "ec2:Search*"
            ],
            "Resource": "*",
            "Effect": "Allow",
            "Sid": "AllowAllOtherEC2ActionsExceptSpotAndReserved"
        },
        {
            "Action": [
                "ec2:ModifyReservedInstances",
                "ec2:PurchaseHostReservation",
                "ec2:PurchaseReservedInstancesOffering",
                "ec2:PurchaseScheduledInstances",
                "rds:PurchaseReservedDBInstancesOffering",
                "dynamodb:PurchaseReservedCapacityOfferings",
                "ec2:CancelSpotFleetRequests",
                "ec2:ModifySpotFleetRequest",
                "ec2:RequestSpotFleet",
                "ec2:RequestSpotInstances",
                "ec2:CancelSpotInstanceRequests",
                "ec2:CreateSpotDatafeedSubscription",
                "ec2:DeleteSpotDatafeedSubscription"
            ],
            "Resource": "*",
            "Effect": "Deny",
            "Sid": "DontBuyReservationsOrSpotPlz"
        },
        {
            "Action": "iam:PassRole",
            "Resource": "arn:aws:iam::xxxxxxxxxxxx:role/TeamRole",
            "Effect": "Allow",
            "Sid": "PassRole"
        }
    ]
}